<%- include('./partials/header') %>

<% if(error.length > 0){ %>
<div class="absolute top-5 left-1/2 -translate-x-1/2 transform p-3 rounded-md bg-red-500 shadow-lg animate-bounce">
  <span class="inline-block text-white font-medium tracking-wide">
    <%= error %>
  </span>
</div>
<% } %>

<style>
/* Background Animation */
body {
  background: linear-gradient(135deg, #c2e9fb 0%, #a1c4fd 100%);
  animation: gradientShift 8s ease infinite alternate;
  background-size: 200% 200%;
}
@keyframes gradientShift {
  from { background-position: 0% 50%; }
  to { background-position: 100% 50%; }
}

/* Typing Animation */
.typing {
  border-right: 3px solid #3b82f6;
  white-space: nowrap;
  overflow: hidden;
  width: 0;
  animation: typing 3s steps(20, end) forwards, blink 0.75s step-end infinite;
}
@keyframes typing {
  from { width: 0 }
  to { width: 100% }
}
@keyframes blink {
  50% { border-color: transparent }
}

/* Glass Card */
.glass {
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
}

/* Floating Inputs */
.fancy-input {
  background: transparent;
  border: 1px solid #e5e7eb;
  color: #1f2937;
  padding: 12px;
  width: 100%;
  border-radius: 8px;
  transition: all 0.3s ease;
}
.fancy-input:focus {
  border-color: #3b82f6;
  box-shadow: 0 0 10px rgba(59, 130, 246, 0.4);
  outline: none;
}

/* Password Eye Icon */
.input-group {
  position: relative;
}
.toggle-password {
  position: absolute;
  top: 50%;
  right: 12px;
  transform: translateY(-50%);
  cursor: pointer;
  color: #64748b;
  transition: all 0.3s ease;
}
.toggle-password:hover {
  color: #3b82f6;
  transform: translateY(-50%) scale(1.1);
}

/* Animated Button */
.btn-animate {
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
}
.btn-animate::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 300%;
  height: 100%;
  background: linear-gradient(120deg, rgba(255,255,255,0.3), rgba(255,255,255,0.7), rgba(255,255,255,0.3));
  transition: all 0.6s ease;
}
.btn-animate:hover::before {
  left: 100%;
}
</style>

<div class="w-full h-screen flex items-center justify-center relative">

  <!-- Floating Shop Button -->
  <a href="/users/shop" 
     class="absolute top-8 right-10 px-6 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full font-semibold btn-animate shadow-lg hover:scale-105 transition-all duration-300">
     üõí Go to Shop
  </a>

  <div class="w-11/12 lg:w-3/4 h-[80vh] grid grid-cols-1 md:grid-cols-2 glass rounded-3xl overflow-hidden">

    <!-- Register Section -->
    <div class="flex flex-col justify-center items-center p-10 relative">
      <div class="absolute top-0 left-0 w-full h-full bg-gradient-to-br from-blue-300/10 to-blue-200/5 pointer-events-none animate-pulse"></div>
      <h3 class="text-4xl font-bold text-gray-800 mb-2 overflow-hidden">
        <span class="typing">Welcome to <span class="text-blue-500">Scatch</span></span>
      </h3>
      <h4 class="text-lg text-gray-700 mb-6">Create your account</h4>

      <form autocomplete="off" action="/users/register" method="post" class="space-y-4 w-full max-w-sm">
        <input type="text" placeholder="Full Name" name="fullname" class="fancy-input">
        <input type="email" placeholder="Email" name="email" class="fancy-input">

        <div class="input-group">
          <input type="password" placeholder="Password" name="password" id="registerPassword" class="fancy-input">
          <i class="toggle-password" onclick="togglePassword('registerPassword', this)">üëÅÔ∏è</i>
        </div>

        <input type="submit"
               value="Create My Account"
               class="w-full py-3 rounded-full mt-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold tracking-wide shadow-lg hover:scale-105 transition-all duration-300 btn-animate cursor-pointer">
      </form>

      <p class="text-sm mt-5 text-gray-700 text-center">
        Are you an owner? 
        <a href="/owners" class="text-blue-500 hover:underline font-medium">Login or Register here.</a>
      </p>
    </div>

    <!-- Login Section -->
    <div class="flex flex-col justify-center items-center bg-gradient-to-br from-blue-100/40 to-blue-50/30 p-10">
      <h4 class="text-3xl font-bold text-gray-800 mb-6">Login to your account</h4>

      <form autocomplete="off" action="/users/login" method="post" class="space-y-4 w-full max-w-sm">
        <input type="email" placeholder="Email" name="email" class="fancy-input">

        <div class="input-group">
          <input type="password" placeholder="Password" name="password" id="loginPassword" class="fancy-input">
          <i class="toggle-password" onclick="togglePassword('loginPassword', this)">üëÅÔ∏è</i>
        </div>

        <input type="submit"
               value="Login"
               class="w-full py-3 rounded-full mt-4 bg-gradient-to-r from-blue-500 to-blue-600 text-white font-semibold tracking-wide shadow-lg hover:scale-105 transition-all duration-300 btn-animate cursor-pointer">
      </form>

      <p class="mt-4 text-sm text-right text-gray-700">
        <a href="/users/forgot-password" class="text-blue-500 hover:underline">Forgot Password?</a>
      </p>
    </div>
  </div>
</div>

<script>
function togglePassword(id, icon) {
  const input = document.getElementById(id);
  if (input.type === "password") {
    input.type = "text";
    icon.textContent = "üôà";
  } else {
    input.type = "password";
    icon.textContent = "üëÅÔ∏è";
  }
}
</script>

<%- include('./partials/footer') %>
